{"ast":null,"code":"\"use strict\";\n\nmodule.exports = exports;\n\nvar url = require('url');\n\nvar URI_REGEX = \"^(.*)\\.(s3(?:-.*)?)\\.amazonaws\\.com$\";\n\nmodule.exports.detect = function (to, config) {\n  var uri = url.parse(to);\n  var hostname_matches = uri.hostname.match(URI_REGEX);\n  config.prefix = !uri.pathname || uri.pathname == '/' ? '' : uri.pathname.replace('/', '');\n\n  if (!hostname_matches) {\n    return;\n  }\n\n  if (!config.bucket) {\n    config.bucket = hostname_matches[1];\n  }\n\n  if (!config.region) {\n    var s3_domain = hostname_matches[2];\n\n    if (s3_domain.slice(0, 3) == 's3-' && s3_domain.length >= 3) {\n      // it appears the region is explicit in the url\n      config.region = s3_domain.replace('s3-', '');\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"script"}
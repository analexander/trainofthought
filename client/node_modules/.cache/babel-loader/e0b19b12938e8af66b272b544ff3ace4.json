{"ast":null,"code":"'use strict';\n\nvar stringWidth = require('string-width');\n\nvar stripAnsi = require('strip-ansi');\n\nmodule.exports = wideTruncate;\n\nfunction wideTruncate(str, target) {\n  if (stringWidth(str) === 0) return str;\n  if (target <= 0) return '';\n  if (stringWidth(str) <= target) return str; // We compute the number of bytes of ansi sequences here and add\n  // that to our initial truncation to ensure that we don't slice one\n  // that we want to keep in half.\n\n  var noAnsi = stripAnsi(str);\n  var ansiSize = str.length + noAnsi.length;\n  var truncated = str.slice(0, target + ansiSize); // we have to shrink the result to account for our ansi sequence buffer\n  // (if an ansi sequence was truncated) and double width characters.\n\n  while (stringWidth(truncated) > target) {\n    truncated = truncated.slice(0, -1);\n  }\n\n  return truncated;\n}","map":null,"metadata":{},"sourceType":"script"}
{"ast":null,"code":"import { __awaiter, __extends, __generator } from \"tslib\";\nimport { FaceDetection } from '../classes';\nimport { BOX_ANCHORS, BOX_ANCHORS_SEPARABLE, DEFAULT_MODEL_NAME, DEFAULT_MODEL_NAME_SEPARABLE_CONV, IOU_THRESHOLD, MEAN_RGB_SEPARABLE } from './const';\nimport { TinyYolov2Base } from './TinyYolov2Base';\n\nvar TinyYolov2 =\n/** @class */\nfunction (_super) {\n  __extends(TinyYolov2, _super);\n\n  function TinyYolov2(withSeparableConvs) {\n    if (withSeparableConvs === void 0) {\n      withSeparableConvs = true;\n    }\n\n    var _this = this;\n\n    var config = Object.assign({}, {\n      withSeparableConvs: withSeparableConvs,\n      iouThreshold: IOU_THRESHOLD,\n      classes: ['face']\n    }, withSeparableConvs ? {\n      anchors: BOX_ANCHORS_SEPARABLE,\n      meanRgb: MEAN_RGB_SEPARABLE\n    } : {\n      anchors: BOX_ANCHORS,\n      withClassScores: true\n    });\n    _this = _super.call(this, config) || this;\n    return _this;\n  }\n\n  Object.defineProperty(TinyYolov2.prototype, \"withSeparableConvs\", {\n    get: function get() {\n      return this.config.withSeparableConvs;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(TinyYolov2.prototype, \"anchors\", {\n    get: function get() {\n      return this.config.anchors;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  TinyYolov2.prototype.locateFaces = function (input, forwardParams) {\n    return __awaiter(this, void 0, void 0, function () {\n      var objectDetections;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.detect(input, forwardParams)];\n\n          case 1:\n            objectDetections = _a.sent();\n            return [2\n            /*return*/\n            , objectDetections.map(function (det) {\n              return new FaceDetection(det.score, det.relativeBox, {\n                width: det.imageWidth,\n                height: det.imageHeight\n              });\n            })];\n        }\n      });\n    });\n  };\n\n  TinyYolov2.prototype.getDefaultModelName = function () {\n    return this.withSeparableConvs ? DEFAULT_MODEL_NAME_SEPARABLE_CONV : DEFAULT_MODEL_NAME;\n  };\n\n  TinyYolov2.prototype.extractParamsFromWeigthMap = function (weightMap) {\n    return _super.prototype.extractParamsFromWeigthMap.call(this, weightMap);\n  };\n\n  return TinyYolov2;\n}(TinyYolov2Base);\n\nexport { TinyYolov2 };","map":{"version":3,"sources":["../../../src/tinyYolov2/TinyYolov2.ts"],"names":[],"mappings":";AAEA,SAAS,aAAT,QAAqC,YAArC;AAGA,SACE,WADF,EAEE,qBAFF,EAGE,kBAHF,EAIE,iCAJF,EAKE,aALF,EAME,kBANF,QAOO,SAPP;AAQA,SAAS,cAAT,QAA+B,kBAA/B;;AAIA,IAAA,UAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAgC,EAAA,SAAA,CAAA,UAAA,EAAA,MAAA,CAAA;;AAE9B,WAAA,UAAA,CAAY,kBAAZ,EAA8C;AAAlC,QAAA,kBAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,kBAAA,GAAA,IAAA;AAAkC;;AAA9C,QAAA,KAAA,GAAA,IAAA;;AACE,QAAM,MAAM,GAAG,MAAM,CAAC,MAAP,CAAc,EAAd,EAAkB;AAC/B,MAAA,kBAAkB,EAAA,kBADa;AAE/B,MAAA,YAAY,EAAE,aAFiB;AAG/B,MAAA,OAAO,EAAE,CAAC,MAAD;AAHsB,KAAlB,EAKf,kBAAkB,GACd;AACA,MAAA,OAAO,EAAE,qBADT;AAEA,MAAA,OAAO,EAAE;AAFT,KADc,GAKd;AACA,MAAA,OAAO,EAAE,WADT;AAEA,MAAA,eAAe,EAAE;AAFjB,KAVW,CAAf;AAgBA,IAAA,KAAA,GAAA,MAAA,CAAA,IAAA,CAAA,IAAA,EAAM,MAAN,KAAa,IAAb;;AACD;;AAED,EAAA,MAAA,CAAA,cAAA,CAAW,UAAA,CAAA,SAAX,EAAW,oBAAX,EAA6B;SAA7B,eAAA;AACE,aAAO,KAAK,MAAL,CAAY,kBAAnB;AACD,KAF4B;oBAAA;;AAAA,GAA7B;AAIA,EAAA,MAAA,CAAA,cAAA,CAAW,UAAA,CAAA,SAAX,EAAW,SAAX,EAAkB;SAAlB,eAAA;AACE,aAAO,KAAK,MAAL,CAAY,OAAnB;AACD,KAFiB;oBAAA;;AAAA,GAAlB;;AAIa,EAAA,UAAA,CAAA,SAAA,CAAA,WAAA,GAAb,UAAyB,KAAzB,EAA2C,aAA3C,EAA4E;;;;;;AACjD,mBAAA,CAAA;AAAA;AAAA,cAAM,KAAK,MAAL,CAAY,KAAZ,EAAmB,aAAnB,CAAN,CAAA;;;AAAnB,YAAA,gBAAgB,GAAG,EAAA,CAAA,IAAA,EAAnB;AACN,mBAAA,CAAA;AAAA;AAAA,cAAO,gBAAgB,CAAC,GAAjB,CAAqB,UAAA,GAAA,EAAG;AAAI,qBAAA,IAAI,aAAJ,CAAkB,GAAG,CAAC,KAAtB,EAA6B,GAAG,CAAC,WAAjC,EAA8C;AAAE,gBAAA,KAAK,EAAE,GAAG,CAAC,UAAb;AAAyB,gBAAA,MAAM,EAAE,GAAG,CAAlF;AAA8C,eAA9C,CAAA;AAAiG,aAA7H,CAAP,CAAA;;;;AACD,GAHY;;AAKH,EAAA,UAAA,CAAA,SAAA,CAAA,mBAAA,GAAV,YAAA;AACE,WAAO,KAAK,kBAAL,GAA0B,iCAA1B,GAA8D,kBAArE;AACD,GAFS;;AAIA,EAAA,UAAA,CAAA,SAAA,CAAA,0BAAA,GAAV,UAAqC,SAArC,EAAiE;AAC/D,WAAO,MAAA,CAAA,SAAA,CAAM,0BAAN,CAAgC,IAAhC,CAAgC,IAAhC,EAAiC,SAAjC,CAAP;AACD,GAFS;;AAGZ,SAAA,UAAA;AAAC,CA1CD,CAAgC,cAAhC,CAAA","sourceRoot":"","sourcesContent":["import { __awaiter, __extends, __generator } from \"tslib\";\r\nimport { FaceDetection } from '../classes';\r\nimport { BOX_ANCHORS, BOX_ANCHORS_SEPARABLE, DEFAULT_MODEL_NAME, DEFAULT_MODEL_NAME_SEPARABLE_CONV, IOU_THRESHOLD, MEAN_RGB_SEPARABLE, } from './const';\r\nimport { TinyYolov2Base } from './TinyYolov2Base';\r\nvar TinyYolov2 = /** @class */ (function (_super) {\r\n    __extends(TinyYolov2, _super);\r\n    function TinyYolov2(withSeparableConvs) {\r\n        if (withSeparableConvs === void 0) { withSeparableConvs = true; }\r\n        var _this = this;\r\n        var config = Object.assign({}, {\r\n            withSeparableConvs: withSeparableConvs,\r\n            iouThreshold: IOU_THRESHOLD,\r\n            classes: ['face']\r\n        }, withSeparableConvs\r\n            ? {\r\n                anchors: BOX_ANCHORS_SEPARABLE,\r\n                meanRgb: MEAN_RGB_SEPARABLE\r\n            }\r\n            : {\r\n                anchors: BOX_ANCHORS,\r\n                withClassScores: true\r\n            });\r\n        _this = _super.call(this, config) || this;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(TinyYolov2.prototype, \"withSeparableConvs\", {\r\n        get: function () {\r\n            return this.config.withSeparableConvs;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TinyYolov2.prototype, \"anchors\", {\r\n        get: function () {\r\n            return this.config.anchors;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    TinyYolov2.prototype.locateFaces = function (input, forwardParams) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var objectDetections;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.detect(input, forwardParams)];\r\n                    case 1:\r\n                        objectDetections = _a.sent();\r\n                        return [2 /*return*/, objectDetections.map(function (det) { return new FaceDetection(det.score, det.relativeBox, { width: det.imageWidth, height: det.imageHeight }); })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    TinyYolov2.prototype.getDefaultModelName = function () {\r\n        return this.withSeparableConvs ? DEFAULT_MODEL_NAME_SEPARABLE_CONV : DEFAULT_MODEL_NAME;\r\n    };\r\n    TinyYolov2.prototype.extractParamsFromWeigthMap = function (weightMap) {\r\n        return _super.prototype.extractParamsFromWeigthMap.call(this, weightMap);\r\n    };\r\n    return TinyYolov2;\r\n}(TinyYolov2Base));\r\nexport { TinyYolov2 };\r\n//# sourceMappingURL=TinyYolov2.js.map"]},"metadata":{},"sourceType":"module"}
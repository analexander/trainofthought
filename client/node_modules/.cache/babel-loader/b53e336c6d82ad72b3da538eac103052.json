{"ast":null,"code":"import * as tf from '@tensorflow/tfjs-core';\nimport { fullyConnectedLayer } from '../common/fullyConnectedLayer';\nimport { prelu } from './prelu';\nimport { sharedLayer } from './sharedLayers';\nexport function RNet(x, params) {\n  return tf.tidy(function () {\n    var convOut = sharedLayer(x, params);\n    var vectorized = tf.reshape(convOut, [convOut.shape[0], params.fc1.weights.shape[0]]);\n    var fc1 = fullyConnectedLayer(vectorized, params.fc1);\n    var prelu4 = prelu(fc1, params.prelu4_alpha);\n    var fc2_1 = fullyConnectedLayer(prelu4, params.fc2_1);\n    var max = tf.expandDims(tf.max(fc2_1, 1), 1);\n    var prob = tf.softmax(tf.sub(fc2_1, max), 1);\n    var regions = fullyConnectedLayer(prelu4, params.fc2_2);\n    var scores = tf.unstack(prob, 1)[1];\n    return {\n      scores: scores,\n      regions: regions\n    };\n  });\n}","map":null,"metadata":{},"sourceType":"module"}
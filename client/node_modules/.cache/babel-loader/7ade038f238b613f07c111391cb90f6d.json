{"ast":null,"code":"import { env } from '../env';\nimport { isMediaLoaded } from './isMediaLoaded';\nexport function awaitMediaLoaded(media) {\n  return new Promise(function (resolve, reject) {\n    if (media instanceof env.getEnv().Canvas || isMediaLoaded(media)) {\n      return resolve();\n    }\n\n    function onLoad(e) {\n      if (!e.currentTarget) return;\n      e.currentTarget.removeEventListener('load', onLoad);\n      e.currentTarget.removeEventListener('error', onError);\n      resolve(e);\n    }\n\n    function onError(e) {\n      if (!e.currentTarget) return;\n      e.currentTarget.removeEventListener('load', onLoad);\n      e.currentTarget.removeEventListener('error', onError);\n      reject(e);\n    }\n\n    media.addEventListener('load', onLoad);\n    media.addEventListener('error', onError);\n  });\n}","map":{"version":3,"sources":["../../../src/dom/awaitMediaLoaded.ts"],"names":[],"mappings":"AAAA,SAAS,GAAT,QAAoB,QAApB;AACA,SAAS,aAAT,QAA8B,iBAA9B;AAEA,OAAM,SAAU,gBAAV,CAA2B,KAA3B,EAAyF;AAE7F,SAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAgB;AACjC,QAAI,KAAK,YAAY,GAAG,CAAC,MAAJ,GAAa,MAA9B,IAAwC,aAAa,CAAC,KAAD,CAAzD,EAAkE;AAChE,aAAO,OAAO,EAAd;AACD;;AAED,aAAS,MAAT,CAAgB,CAAhB,EAAwB;AACtB,UAAI,CAAC,CAAC,CAAC,aAAP,EAAsB;AACtB,MAAA,CAAC,CAAC,aAAF,CAAgB,mBAAhB,CAAoC,MAApC,EAA4C,MAA5C;AACA,MAAA,CAAC,CAAC,aAAF,CAAgB,mBAAhB,CAAoC,OAApC,EAA6C,OAA7C;AACA,MAAA,OAAO,CAAC,CAAD,CAAP;AACD;;AAED,aAAS,OAAT,CAAiB,CAAjB,EAAyB;AACvB,UAAI,CAAC,CAAC,CAAC,aAAP,EAAsB;AACtB,MAAA,CAAC,CAAC,aAAF,CAAgB,mBAAhB,CAAoC,MAApC,EAA4C,MAA5C;AACA,MAAA,CAAC,CAAC,aAAF,CAAgB,mBAAhB,CAAoC,OAApC,EAA6C,OAA7C;AACA,MAAA,MAAM,CAAC,CAAD,CAAN;AACD;;AAED,IAAA,KAAK,CAAC,gBAAN,CAAuB,MAAvB,EAA+B,MAA/B;AACA,IAAA,KAAK,CAAC,gBAAN,CAAuB,OAAvB,EAAgC,OAAhC;AACD,GArBM,CAAP;AAsBD","sourceRoot":"","sourcesContent":["import { env } from '../env';\r\nimport { isMediaLoaded } from './isMediaLoaded';\r\nexport function awaitMediaLoaded(media) {\r\n    return new Promise(function (resolve, reject) {\r\n        if (media instanceof env.getEnv().Canvas || isMediaLoaded(media)) {\r\n            return resolve();\r\n        }\r\n        function onLoad(e) {\r\n            if (!e.currentTarget)\r\n                return;\r\n            e.currentTarget.removeEventListener('load', onLoad);\r\n            e.currentTarget.removeEventListener('error', onError);\r\n            resolve(e);\r\n        }\r\n        function onError(e) {\r\n            if (!e.currentTarget)\r\n                return;\r\n            e.currentTarget.removeEventListener('load', onLoad);\r\n            e.currentTarget.removeEventListener('error', onError);\r\n            reject(e);\r\n        }\r\n        media.addEventListener('load', onLoad);\r\n        media.addEventListener('error', onError);\r\n    });\r\n}\r\n//# sourceMappingURL=awaitMediaLoaded.js.map"]},"metadata":{},"sourceType":"module"}
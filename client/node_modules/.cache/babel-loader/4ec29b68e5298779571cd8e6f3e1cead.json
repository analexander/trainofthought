{"ast":null,"code":"export function createFileSystem(fs) {\n  var requireFsError = '';\n\n  if (!fs) {\n    try {\n      fs = require('fs');\n    } catch (err) {\n      requireFsError = err.toString();\n    }\n  }\n\n  var readFile = fs ? function (filePath) {\n    return new Promise(function (res, rej) {\n      fs.readFile(filePath, function (err, buffer) {\n        return err ? rej(err) : res(buffer);\n      });\n    });\n  } : function () {\n    throw new Error(\"readFile - failed to require fs in nodejs environment with error: \" + requireFsError);\n  };\n  return {\n    readFile: readFile\n  };\n}","map":{"version":3,"sources":["../../../src/env/createFileSystem.ts"],"names":[],"mappings":"AAEA,OAAM,SAAU,gBAAV,CAA2B,EAA3B,EAAmC;AAEvC,MAAI,cAAc,GAAG,EAArB;;AAEA,MAAI,CAAC,EAAL,EAAS;AACP,QAAI;AACF,MAAA,EAAE,GAAG,OAAO,CAAC,IAAD,CAAZ;AACD,KAFD,CAEE,OAAO,GAAP,EAAY;AACZ,MAAA,cAAc,GAAG,GAAG,CAAC,QAAJ,EAAjB;AACD;AACF;;AAED,MAAM,QAAQ,GAAG,EAAE,GACf,UAAS,QAAT,EAAyB;AACzB,WAAO,IAAI,OAAJ,CAAoB,UAAC,GAAD,EAAM,GAAN,EAAS;AAClC,MAAA,EAAE,CAAC,QAAH,CAAY,QAAZ,EAAsB,UAAS,GAAT,EAAmB,MAAnB,EAAiC;AACrD,eAAO,GAAG,GAAG,GAAG,CAAC,GAAD,CAAN,GAAc,GAAG,CAAC,MAAD,CAA3B;AACD,OAFD;AAGD,KAJM,CAAP;AAKD,GAPgB,GAQf,YAAA;AACA,UAAM,IAAI,KAAJ,CAAU,uEAAqE,cAA/E,CAAN;AACD,GAVH;AAYA,SAAO;AACL,IAAA,QAAQ,EAAA;AADH,GAAP;AAGD","sourceRoot":"","sourcesContent":["export function createFileSystem(fs) {\r\n    var requireFsError = '';\r\n    if (!fs) {\r\n        try {\r\n            fs = require('fs');\r\n        }\r\n        catch (err) {\r\n            requireFsError = err.toString();\r\n        }\r\n    }\r\n    var readFile = fs\r\n        ? function (filePath) {\r\n            return new Promise(function (res, rej) {\r\n                fs.readFile(filePath, function (err, buffer) {\r\n                    return err ? rej(err) : res(buffer);\r\n                });\r\n            });\r\n        }\r\n        : function () {\r\n            throw new Error(\"readFile - failed to require fs in nodejs environment with error: \" + requireFsError);\r\n        };\r\n    return {\r\n        readFile: readFile\r\n    };\r\n}\r\n//# sourceMappingURL=createFileSystem.js.map"]},"metadata":{},"sourceType":"module"}